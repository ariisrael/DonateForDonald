{{> header}}
<main class="ui text container settings-page">
  <div>
    <h1>
      {{title}}
    </h1>
    <div>
      <h3>Social</h3>
      <div class="ui buttons" >

        {{#if_not user.facebook}}
        <a href="/auth/facebook">
          <button class="ui large button facebook icon">
              <i class="facebook icon"></i>
                Link Facebook
            </button>
        </a>
        {{/if_not}} {{#if user.facebook}}
        <a href="/unlink/facebook" class="js-unlink-facebook">
          <button class="ui button large red icon">
              <i class="facebook icon"></i>
              Unlink Facebook
            </button>
        </a>
        {{/if}} {{#if_not user.twitter}}
        <a href="/auth/twitter">
          <button class="ui button large twitter icon">
            <i class="twitter icon"></i>
              Link Twitter
          </button>
        </a>
        {{/if_not}} {{#if user.twitter}}
        <a href="/unlink/twitter" class="js-unlink-twitter {{#if_not user.twitter}}hide{{/if_not}}">
          <button class="ui button large red icon">
            <i class="twitter icon"></i>
            Unlink Twitter
          </button>
        </a>
        {{/if}}

      </div>
    </div>
    <form id="" class="ui large form" method="post" action="/account">
      <h3>Email</h3>
      <input type="hidden" name="_csrf" value="{{csrfToken}}">
      <div class="field">
        <label>Current Email</label>
        <div>{{user.email}}</div>
      </div>
      <div class="two fields">
        <div class="field">
          <label>New Email</label>
          <div class="ui input fluid">
            <input type="email" name="confirm" placeholder="New Email">
          </div>
        </div>
        <div class="field">
          <label>Confirm Email</label>
          <div class="ui input fluid">
            <input type="email" name="confirm_email" placeholder="Confirm Email">
          </div>
        </div>
      </div>
      <div class="field">
        <button class="ui button primary icon"><i class="icon envelope"></i> Update Email
        </button>
      </div>
    </form>
    <form id="" class="ui large form" method="post" action="/account">
      <h3>Password</h3>
      <input type="hidden" name="_csrf" value="{{csrfToken}}">
      <div class="two fields">
        <div class="field">
          <label>New Password</label>
          <div class="ui input fluid">
            <input type="password" name="password" placeholder="New Password">
          </div>
        </div>
        <div class="field">
          <label>Confirm Password</label>
          <div class="ui input fluid">
            <input type="password" name="confirm" placeholder="Confirm Password">
          </div>
        </div>
      </div>
      <div class="field">
        <button class="ui button primary icon"><i class="icon key"></i> Change Password
        </button>
      </div>
    </form>
    <form id="social-toggle" class="ui large form" method="post" action="">
      <h3>Social</h3>
      <p>
        This will turn on or off tweeting of a donation by default.
        <br>
        <i>Warning:</i>
        It will disable or enable social on all triggers you currently have.
        You will have to individually enable or disable them.
      </p>
      <div class="field">
        <div class="ui input">
          <button class="ui button icon red js-social-active-button
            js-disable {{#if_not user.social}}hide{{/if_not}}" data-id="{{this.id}}">
            <i class="icon twitter"></i>
            Disable
          </button>
          <button class="ui button icon green js-social-active-button
            js-enable {{#if user.social}}hide{{/if}}" data-id="{{this.id}}">
            <i class="icon twitter"></i>
            <span class="text">Enable</span>
          </button>
        </div>
      </div>
    </form>
    <form id="monthly-maximum" class="ui large form" method="post" action="/account">
      <h3>Monthly Donation Maximum</h3>
      <div class="three fields">
        <div class="field">
          <div class="ui left icon input">
            <i class="dollar left icon js-money"></i>
            <meta class="monthly-maximum-data" data-maximum="{{#if user.monthlyLimit}}{{user.monthlyLimit}}{{/if}}">
            <input type="text" placeholder="100" maxlength="4" {{#if user.monthlyLimit}}value={{user.monthlyLimit}}{{/if}}>
          </div>
          <div class="field">
            <i class="checkmark right icon green js-approved" style="display: none;"></i>
          </div>
        </div>
      </div>
      <div class="field">
        <button class="ui button primary icon">
          <i class="icon money" aria-hidden="true"></i> Set Monthly Limit
        </button>
      </div>
    </form>
    <form id="payment-form" method="post" class="ui large form">
      <h3>Payment</h3>
      <input type="hidden" name="_csrf" value="{{csrfToken}}">
      <div class="ui two fields">
        <div class="field">
          <label>First Name</label>
          <input type="text" name="first_name" placeholder="First Name" data-panda="first_name">
        </div>
        <div class="field">
          <label>Last Name</label>
          <input type="text" name="last_name" placeholder="Last Name" data-panda="last_name">
        </div>
      </div>
      <div class="field">
        <label>Credit Card Number</label>
        <div class="ui input fluid">
          <input type="" name="credit_card" placeholder="Credit Card Number" data-panda="credit_card">
        </div>
      </div>
      <div class="ui two fields">
        <div class="field">
          <label>CVV</label>
          <input type="text" name="cvv" placeholder="CVV" maxlength="4" data-panda="cvv">
        </div>
        <div class="field">
          <label>Expiration Date</label>
          <input type="text" name="expiration" placeholder="MM/YYYY" data-panda="expiration">
        </div>
      </div>
      <div class="field">
        <button class="ui button primary icon"><i class="icon credit card"></i> Save Payment
        </button>
      </div>
    </form>
    <form id="delete-account" method="post" action="/delete-account" class="ui large form">
      <h3>Account</h3>
      <input type="hidden" name="_csrf" value="{{csrfToken}}">
      <div class="field">
        <button class="ui red button icon delete-account-btn" type="submit"><i class="icon trash"></i>Delete Account</button>
      </div>
    </form>



    <div class="ui small modal delete-account">
      <div class="header">
        Are you sure you want to delete your account? This cannot be undone.
      </div>
      <div class='actions'>
        <div class="ui deny basic button">
          Cancel
        </div>
        <div class="ui red right labeled icon button js-confirm-delete">
          <i class="trash icon"></i> Delete My Account
        </div>
      </div>
    </div>
</main>
{{>pandascripts}}
